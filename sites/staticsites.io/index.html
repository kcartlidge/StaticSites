<html>

<head>
    <title>Static Sites</title>
    <link rel="stylesheet" media="all" href="/css/site.css" />
</head>

<body>
    <div id="header">
        <h1>Static Sites</h1>
        <div>K Cartlidge</div>
    </div>

    <div id="main">

        <h2>About Static Sites</h2>
        <ul>
            <li>
                Run <strong>all</strong> your static <strong>websites</strong> on a <strong>single port</strong> with just
                <strong>one server</strong>.
            </li>
            <li>
                Have your sites running <strong>HTTPS</strong> with absolutely <strong>zero configuration</strong>.
            </li>
            <li>
                <strong>No need</strong> for a traditional <strong>web server</strong> deploy, meaning <strong>tiny resource</strong>                usage.
            </li>
            <li>
                <strong>Production ready</strong> with a <strong>single file</strong> deployment and <strong>great performance</strong>.
            </li>
            <li>
                <strong>Open source</strong> codebase for peace of mind:
                <a href="https://github.com/kcartlidge/StaticSites" target="_blank">
                    view the code on my GitHub.
                </a>
            </li>
        </ul>

        <h2>Installing</h2>
        <p>
            Whether you are wanting to run on your local machine or a server/cloud instance makes no difference. Follow the steps below
            to get started.
        </p>
        <h3>Download the relevant version</h3>
        <ul>
            <li><a href="/builds/macos/StaticSites">Download the Mac OS version</a></li>
            <li><a href="/builds/linux/StaticSites">Download the Linux version</a></li>
            <li><a href="/builds/windows/StaticSites.exe">Download the Windows version</a></li>
        </ul>
        <h3>Check the dependencies and install it</h3>
        <p>
            <em>There are no dependencies. There is no installation needed.</em><br/> Just drop the download into a suitable
            folder and it is ready to run.
        </p>

        <h2>Running</h2>
        <p>
            Create a <code>sites.ini</code> file alongside the application containing something like the following, replacing
            <code>example.com</code> etc with your site domains and folders:
        </p>
        <pre><code>example.com = /home/karl/my-sites/example.com
example2.com = /home/karl/my-sites/example-2.com</code></pre>
        <p>
            Copy your static site(s) into place in folders alongside the downloaded application, named as per the domains. The folder
            tree should look something like this:
        </p>
        <pre><code>/home/karl/my-sites
    StaticSites
    sites.ini
    /example.com
        index.html
    /example-2.com
        index.html</code></pre>
        <p>
            You can then run the server:
        </p>
        <pre><code>cd /home/karl/my-sites
./StaticSites -sites sites.ini -port 8000 -local example.com</code></pre>
        <p>
            This will launch <em>all</em> sites listed in the <code>sites.ini</code> file on port <code>8000</code> (which
            is the default anyway, but shown here for completeness). The sites will all start responding to requests to their
            domain name provided of course that your DNS routes it in.
        </p>
        <p>
            Don't expect to see the sites at <code>localhost</code> by default. The <code>local</code> parameter allows you
            to nominate one site to run as <code>localhost</code> so there is no need to set the DNS or do any workarounds
            when you want to work on it locally.
        </p>

        <h3>Serving using HTTPS (green padlock)</h3>
        <p>
            Just set the port to <code>443</code>, which is the standard for HTTPS. Static Sites will handle obtaining any
            certificates, caching them, and renewing them (for all the sites).
        </p>
        <p>
            The first time a site is hit there may be a slight delay whilst the certificate is updated, but subsequent hits to that site
            will automatically use the cached version and not be subject to that brief pause.
        </p>

        <h2>Notes</h2>
        <ul>
            <li>
                Changing the <code>sites.ini</code> file requires a StaticSites restart. Changing the <em>content</em> of
                a site folder <em>does not</em>.
            </li>
            <li>
                The site domains on the left in the <code>sites.ini</code> file should be the complete domain name, including
                subdomain, but without any protocol, like <code>example.com</code> or <code>blog.kcartlidge.com</code>.
            </li>
            <li>
                The site folders on the right in the <code>sites.ini</code> file should either be relative to the folder
                you launch the server from (<code>./sites</code>), fixed to your home folder (<code>~/sites</code>), or absolute
                paths (<code>/home/karl/sites</code>) that will work from anywhere. This will matter hugely if you have the
                server launch automatically and it runs under a different user, as the current directory and the home folder
                will probably change from when run manually.
            </li>
            <li>
                The number of sites you can serve is limited by the number of host names LetsEncrypt will allow in their certificates (around
                100), as a single certificate is maintained for all the domains. There are also [rate limits applied by LetsEncrypt
                for certificate issuance](https://letsencrypt.org/docs/rate-limits/), but certificates are only requested
                when port <code>443</code> is used so simply avoid that port until ready.
            </li>
            <li>
                No caching is currently implemented. Static sites are extremely light on resource usage, and the Static Sites server itself
                hugely lighter than full fledged traditional web servers, so performance should not be an issue. If it is,
                static sites are also prime candidates for services like <em>CloudFlare</em> or equivalent.
            </li>
        </ul>

        <div id="footer">
            <p>
                <strong>Simplicity</strong> is the driving force. You get configuration free serving of all your static sites
                using HTTPS with the smallest effort possible from a self-hosted facility. Requests for things such as Markdown
                processing, folder listings and so forth are beyond that scope.
            </p>
        </div>
    </div>
</body>

</html>
